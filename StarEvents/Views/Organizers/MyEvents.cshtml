@model IEnumerable<StarEvents.Models.Event>
@{
    ViewData["Title"] = "My Events";
}

@section Styles {
    <style>
        .page-header {
            background: linear-gradient(135deg, #007991 0%, #78ffd6 100%);
            color: white;
            padding: 40px 0;
            margin-bottom: 40px;
            border-radius: 15px;
        }

        .event-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .event-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .event-card-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .event-card-body {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .event-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .event-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .event-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .event-status {
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge {
            font-size: 0.8rem;
            padding: 6px 12px;
        }

        .action-buttons a {
            margin-left: 5px;
        }
    </style>
}

<div class="page-header text-center">
    <div class="container">
        <h1>My Event Dashboard</h1>
        <p class="lead">Manage, update, and track all your created events from here.</p>
        <a asp-action="CreateEvent" class="btn btn-light mt-3">
            <i class="fas fa-plus-circle"></i> Create New Event
        </a>
    </div>
</div>

<div class="container">
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <div class="event-grid">
        @foreach (var item in Model)
        {
            <div class="event-card">
                <img src="@(string.IsNullOrEmpty(item.ImageUrl) ? "/images/default-event.jpg" : item.ImageUrl)"
                     class="event-card-img" alt="@item.Title" onerror="this.src='/images/default-event.jpg'" />
                <div class="event-card-body">
                    <h5 class="event-title">@item.Title</h5>
                    <div class="event-meta">
                        <div class="event-meta-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>@item.StartDate.ToString("MMM dd, yyyy")</span>
                        </div>
                        <div class="event-meta-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>@item.Location</span>
                        </div>
                    </div>
                    <div class="event-status">
                        <span class="badge @(item.IsActive && item.Status == "Active" ? "bg-success" : "bg-secondary")">
                            @(item.IsActive && item.Status == "Active" ? "Published" : "Draft/Inactive")
                        </span>
                        <div class="action-buttons">
                            <a asp-action="EditEvent" asp-route-id="@item.Id" class="btn btn-sm btn-outline-primary" title="Edit">
                                <i class="fas fa-pencil-alt"></i>
                            </a>
                            <a asp-action="DeleteEvent" asp-route-id="@item.Id" class="btn btn-sm btn-outline-danger" title="Delete">
                                <i class="fas fa-trash-alt"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
    @if (!Model.Any())
    {
        <div class="text-center py-5">
            <p class="lead">You haven't created any events yet.</p>
            <a asp-action="CreateEvent" class="btn btn-primary">Create Your First Event</a>
        </div>
    }
</div>
